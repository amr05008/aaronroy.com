---
date: 2025-10-10
summary: Implemented hybrid OG image system with default fallback
tags: [seo, og-images, social]
files_changed: [src/layouts/BaseLayout.astro, src/layouts/BlogPost.astro, public/images/og-default.png]
---

## What we built

- Implemented hybrid OG image system with default fallback at `public/images/og-default.png`
- Updated `src/layouts/BaseLayout.astro` to use default OG image instead of `null` when no custom image specified
- Fixed `src/layouts/BlogPost.astro` to pass `heroImage` prop to BaseLayout (critical bug fix)
- Created `public/og-images/` directory structure for custom post images
- Added first custom OG image for "Making migrations fun with Claude Code" post
- Updated CLAUDE.md SEO Notes with OG image documentation

## Technical decisions

- **Hybrid approach**: Chose default fallback + optional custom images (Option 3) for best balance of immediate coverage and future flexibility
- **Absolute URLs**: Used `new URL(path, Astro.site).toString()` for OG tags to ensure social platforms can fetch images correctly
- **Directory structure**: Created separate `public/og-images/` folder to keep custom OG images organized apart from blog post content images
- **Always render tags**: Removed conditional rendering of `og:image` and `twitter:image` meta tags to ensure LinkedIn/Facebook always have image metadata
- **Image specs**: Standardized on 1200Ã—630px (LinkedIn/Facebook/Twitter requirement) for all OG images

## Issues encountered

- **File location mismatch**: User created `public/images/og-images/` instead of `public/og-images/` - moved file to match frontmatter path
- **Frontmatter parsing**: Blank line inside YAML frontmatter prevented proper parsing - removed empty line
- **Missing prop passthrough**: `BlogPost.astro` received `heroImage` from frontmatter but didn't forward to `BaseLayout` - added `ogImage={heroImage}` parameter (root cause of custom images not working)
- **Browser caching**: Dev server updated but browser showed cached OG tags - resolved with hard refresh

## Verification

- Default OG image fallback working for all posts without custom images
- Custom OG image override working via `heroImage` frontmatter field
- OG meta tags generate absolute URLs (`https://aaronroy.com/...`)
- Dev server hot-reload working for content and layout changes
- Production build successful (33 pages)
- Custom image accessible at `/og-images/making-migrations-fun-with-claude-code.png`

## Outcomes

- All 29 blog posts now have OG images for social sharing (LinkedIn, Facebook, Twitter)
- Default branded image provides consistent fallback across entire site
- Simple frontmatter addition (`heroImage: "/og-images/filename.png"`) enables custom images per post
- Social sharing now displays rich previews with images instead of text-only
- System documented and ready for production deployment
